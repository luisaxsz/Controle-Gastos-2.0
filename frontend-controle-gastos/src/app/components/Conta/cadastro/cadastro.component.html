<section>
  <h1>Cadastro</h1>
  <form
    class="formulario-cadastro"
    id="formulario-cadastro"
    #formCadastro="ngForm"
    (submit)="cadastrarConta(formCadastro)"
  >
    <div>
      <label for="nome" class="label">Nome:</label>
      <input
        id="nome"
        name="nome"
        class="campo-form"
        ngModel
        required
        minlength="3"
        #nome="ngModel"
      />
      <div *ngIf="(nome?.touched && nome?.invalid) || nome?.dirty">
        <app-mensagens-erro
          *ngIf="nome?.errors?.['required']"
          mensagem="Nome é obrigatório"
        ></app-mensagens-erro>
        <app-mensagens-erro
          *ngIf="nome?.errors?.['minlength']"
          mensagem="Nome precisa conter mais que 3 caracteres"
        ></app-mensagens-erro>
      </div>
    </div>
    <div>
      <label for="sobrenome">Sobrenome:</label>
      <input
        type="text"
        name="sobrenome"
        ngModel
        required
        minlength="3"
        #sobrenome="ngModel"
      />
      <div *ngIf="(sobrenome?.touched && sobrenome?.invalid) || sobrenome?.dirty">
        <app-mensagens-erro
          *ngIf="sobrenome?.errors?.['required']"
          mensagem="Sobrenome é obrigatório"
        ></app-mensagens-erro>
        <app-mensagens-erro
          *ngIf="sobrenome?.errors?.['minlength']"
          mensagem="Sobrenome precisa conter mais que 3 caracteres"
        ></app-mensagens-erro>
      </div>
    </div>
    <div>
      <label for="telefone">Telefone:</label>
      <input
        name="telefone"
        type="text"
        ngModel
        #telefone="ngModel"
        required
        pattern="/^(\+55|55|0)?(\d{2})?(\d{5}-?\d{4})$/"
      />
      <div *ngIf="(telefone?.touched && telefone?.invalid) || telefone?.dirty">
        <app-mensagens-erro
          *ngIf="telefone?.errors?.['required']"
          mensagem="Telefone é obrigatório"
        ></app-mensagens-erro>
        <app-mensagens-erro
          *ngIf="telefone?.errors?.['pattern']"
          mensagem="Telefone inválido, use padrão (xx) xxxxx-xxxx"
        ></app-mensagens-erro>
      </div>
    </div>
    <div>
      <label for="email">Email:</label>
      <input
        type="text"
        name="email"
        ngModel
        #email="ngModel"
        required
        pattern="^[a-zA-Z1-9_]+( [a-zA-Z0-9_]+)*$"
      />
      <div *ngIf="(email?.touched && email?.invalid) || email?.dirty">
        <app-mensagens-erro
          *ngIf="email?.errors?.['required']"
          mensagem="Email é obrigatório"
        ></app-mensagens-erro>
        <app-mensagens-erro
          *ngIf="email?.errors?.['pattern']"
          mensagem="Email inválido, use o padrão 'exemplo@exemplo.com'"
        ></app-mensagens-erro>
      </div>
    </div>
    <div>
      <label for="senha">Senha:</label>
      <input
        name="senha"
        type="password"
        ngModel
        #senha="ngModel"
        pattern="/^(\+55|55|0)?(\d{2})?(\d{5}-?\d{4})$/"
        required
      />
      <div *ngIf="(senha?.touched && senha?.invalid) || senha?.dirty">
        <app-mensagens-erro
          *ngIf="senha?.errors?.['required']"
          mensagem="Senha é obrigatório"
        ></app-mensagens-erro>
        <app-mensagens-erro
          *ngIf="senha?.errors?.['pattern']"
          mensagem="Sua senha tem que conter:</br>
           - 6-15 caracteres </br>
           - Deve ter no mínimo uma letra maiúscula e minúscula</br>
           - Deve ter no mínimo 1 número</br>
           - Deve ter no mínimo 1 caracter especial(!#@$%&) "
        ></app-mensagens-erro>
      </div>
    </div>
    <div>
      <label for="confirmarSenha">Confirmar senha:</label>
      <input
        name="confirmarSenha"
        type="password"
        ngModel
        #confirmarSenha="ngModel"
        required
        appConfirmaSenhaValidator
      />
      <div *ngIf="(confirmarSenha?.touched && confirmarSenha?.invalid) || confirmarSenha?.dirty">
        <app-mensagens-erro
          *ngIf="confirmarSenha?.errors?.['required']"
          mensagem="Confirme sua senha"
        ></app-mensagens-erro>
        <app-mensagens-erro
          *ngIf="confirmarSenha?.errors?.['appConfirmaSenhaValidator']"
          mensagem="As senhas precisam ser iguais"
        ></app-mensagens-erro>
      </div>
    </div>
    <button type="submit" class="button-form">Cadastrar</button>
  </form>
  <button (click)="cancelar()" class="button-form">Cacelar</button>
</section>
